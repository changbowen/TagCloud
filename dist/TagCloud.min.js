/*!
 * TagCloud.js v2.3.0
 * Copyright (c) 2016-2022 @ Cong Min
 * MIT License - https://github.com/mcc108/TagCloud
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).TagCloud=t()}(this,function(){"use strict";function t(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function r(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?t(Object(o),!0).forEach(function(e){var t,n;t=i,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})}return i}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0,i=this,o=a;if(!(i instanceof o))throw new TypeError("Cannot call a class as a function");i=this;if(!e||1!==e.nodeType)return new Error("Incorrect element type");i.$container=e,i.htmls=t||[],i.config=r(r({},a._defaultConfig),n||{}),i.radius=i.config.radius,i.depth=2*i.radius,i.size=1.5*i.radius,i.maxSpeed=a._getMaxSpeed(i.config.maxSpeed),i.initSpeed=a._getInitSpeed(i.config.initSpeed),i.direction=i.config.direction,i.keep=i.config.keep,i.paused=!1,i._createElement(),i._init(),a.list.push({el:i.$el,container:e,instance:i})}var e,t,n;return e=a,n=[{key:"_on",value:function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on".concat(t),n):e["on".concat(t)]=n}},{key:"_parseTagCfg",value:function(e){return Array.isArray(e)?{html:e[0],mutator:e[1]}:{html:e,mutator:null}}}],(t=[{key:"_createElement",value:function(){var n=this,i=document.createElement("div");i.className=n.config.containerClass,n.config.useContainerInlineStyles&&(i.style.position="relative",i.style.width="".concat(2*n.radius,"px"),i.style.height="".concat(2*n.radius,"px")),n.items=[],n.htmls.forEach(function(e,t){e=a._parseTagCfg(e),e=r({el:n._createItemElement(e.html,t,e.mutator)},n._computePosition(t));i.appendChild(e.el),n.items.push(e)}),n.$container.appendChild(i),n.$el=i}},{key:"_createItemElement",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=document.createElement("template"),e=(i.innerHTML=e.trim(),i.content.firstChild);return e.nodeType!==Node.ELEMENT_NODE&&((e=document.createElement("span")).innerText=i.content.firstChild.textContent),e.className=this.config.itemClass,this.config.useItemInlineStyles&&(e.style.willChange="transform, opacity, filter",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.zIndex=t+1,e.style.filter="alpha(opacity=0)",e.style.opacity=0,e.style.WebkitTransformOrigin=i="50% 50%",e.style.MozTransformOrigin=i,e.style.OTransformOrigin=i,e.style.transformOrigin=i,e.style.WebkitTransform=t="translate3d(-50%, -50%, 0) scale(1)",e.style.MozTransform=t,e.style.OTransform=t,e.style.transform=t),"function"==typeof n&&n.call(e),e}},{key:"_computePosition",value:function(e){var t=this.htmls.length,e=(1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(e=Math.floor(Math.random()*(t+1))),Math.acos((2*e+1)/t-1)),t=Math.sqrt((t+1)*Math.PI)*e;return{x:this.size*Math.cos(t)*Math.sin(e)/2,y:this.size*Math.sin(t)*Math.sin(e)/2,z:this.size*Math.cos(e)/2}}},{key:"_requestInterval",value:function(n,i){var o=window.requestAnimationFrame,a=(new Date).getTime(),r={};return r.value=o(function e(){r.value=o(e);var t=(new Date).getTime();i<=t-a&&(n.call(),a=(new Date).getTime())}),r}},{key:"_init",value:function(){var n=this;n.active=!1,n.mouseX0=n.initSpeed*Math.sin(n.direction*(Math.PI/180)),n.mouseY0=-n.initSpeed*Math.cos(n.direction*(Math.PI/180)),n.mouseX=n.mouseX0,n.mouseY=n.mouseY0,a._on(n.$el,"mouseover",function(){n.active=!0}),a._on(n.$el,"mouseout",function(){n.active=!1}),a._on(n.keep?window:n.$el,"mousemove",function(e){e=e||window.event;var t=n.$el.getBoundingClientRect();n.mouseX=(e.clientX-(t.left+t.width/2))/5,n.mouseY=(e.clientY-(t.top+t.height/2))/5}),n._next(),n.interval=n._requestInterval(function(){n._next.call(n)},10)}},{key:"_next",value:function(){var e,t,n,r,s=this;s.paused||(s.keep||s.active||(s.mouseX=Math.abs(s.mouseX-s.mouseX0)<1?s.mouseX0:(s.mouseX+s.mouseX0)/2,s.mouseY=Math.abs(s.mouseY-s.mouseY0)<1?s.mouseY0:(s.mouseY+s.mouseY0)/2),e=-(Math.min(Math.max(-s.mouseY,-s.size),s.size)/s.radius)*s.maxSpeed,t=Math.min(Math.max(-s.mouseX,-s.size),s.size)/s.radius*s.maxSpeed,Math.abs(e)<=.01&&Math.abs(t)<=.01||(n=Math.PI/180,r=[Math.sin(e*n),Math.cos(e*n),Math.sin(t*n),Math.cos(t*n)],s.items.forEach(function(e){var t=e.x,n=e.y*r[1]+e.z*-r[0],i=e.y*r[0]+e.z*r[1],o=i*r[3]-t*r[2],a=2*s.depth/(2*s.depth+o);e.x=t*r[3]+i*r[2],e.y=n,e.z=o,e.scale=a.toFixed(3);t=(1<(t=a*a-.25)?1:t).toFixed(3),i=e.el,n=(e.x-i.offsetWidth/2).toFixed(2),o=(e.y-i.offsetHeight/2).toFixed(2),a="translate3d(".concat(n,"px, ").concat(o,"px, 0) scale(").concat(e.scale,")");i.style.WebkitTransform=a,i.style.MozTransform=a,i.style.OTransform=a,i.style.transform=a,i.style.filter="alpha(opacity=".concat(100*t,")"),i.style.opacity=t})))}},{key:"update",value:function(e){var i=this,e=(i.htmls=e||[],i.htmls.forEach(function(e,t){var n=i.items[t],e=a._parseTagCfg(e),e=i._createItemElement(e.html,t,e.mutator);n?(n.el.remove(),n.el=e):(n=r({el:e},i._computePosition(t,!0)),i.items.push(n)),i.$el.appendChild(n.el)}),i.htmls.length),t=i.items.length;e<t&&i.items.splice(e,t-e).forEach(function(e){i.$el.removeChild(e.el)})}},{key:"destroy",value:function(){var t=this,e=(t.interval=null,a.list.findIndex(function(e){return e.el===t.$el}));-1!==e&&a.list.splice(e,1),t.$container&&t.$el&&t.$container.removeChild(t.$el)}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();o.list=[],o._defaultConfig={radius:100,maxSpeed:"normal",initSpeed:"normal",direction:135,keep:!0,useContainerInlineStyles:!0,useItemInlineStyles:!0,containerClass:"tagcloud",itemClass:"tagcloud--item"},o._getMaxSpeed=function(e){return{slow:.5,normal:1,fast:2}[e]||1},o._getInitSpeed=function(e){return{slow:16,normal:32,fast:80}[e]||32};return function(e,t,n){(e="string"==typeof e?document.querySelectorAll(e):e).forEach||(e=[e]);var i=[];return e.forEach(function(e){e&&i.push(new o(e,t,n))}),i.length<=1?i[0]:i}});
